{
  "bug_report_encryption": {
    "title": "Bug: Vault encryption fails on large files (>5MB)",
    "body": "## Bug Description\nVault encryption fails when trying to encrypt files larger than 5MB. The operation times out after 30 seconds.\n\n## Steps to Reproduce\n1. Navigate to /dashboard/vault\n2. Click 'Create Entry'\n3. Upload file >5MB as metadata\n4. Click 'Save'\n5. Observe timeout error\n\n## Expected Behavior\nLarge files should be encrypted successfully, possibly with progress indicator\n\n## Actual Behavior\nOperation times out after 30s with error: \"Encryption timeout\"\n\n## Environment\n- Browser: Chrome 131\n- OS: Windows 11\n- Node.js: v18.19.0\n- Next.js: 15.1.3\n\n## Encryption Context\n- Encryption key ID: v2\n- Data size: 6.2 MB\n- Error: \"SubtleCrypto operation timeout\"\n\n## Additional Context\nThis affects users trying to upload high-resolution documents or images.",
    "labels": ["bug", "encryption", "high"],
    "assignees": []
  },
  "feature_request_consent": {
    "title": "Enhancement: Add consent duration templates",
    "body": "## Feature Description\nAdd pre-defined duration templates when creating consents (1 month, 3 months, 6 months, 1 year, custom)\n\n## User Story\nAs a data owner,\nI want to quickly select standard consent durations,\nSo that I don't have to manually enter dates each time.\n\n## Problem Statement\nCurrently, users must manually select start/end dates for every consent. Most consents follow standard durations (1 month, 1 year), making this repetitive.\n\n## Proposed Solution\nAdd a dropdown with duration templates:\n- 1 month\n- 3 months\n- 6 months\n- 1 year\n- Custom (show date pickers)\n\nWhen selecting a template, auto-calculate endDate from startDate.\n\n## Privacy Impact Assessment\n- **Data collected**: None (UI improvement only)\n- **Consent required**: No\n- **Encryption needed**: No\n- **Audit events**: None (existing consent creation events apply)\n- **Data retention**: N/A\n\n## User Interface\n```\n[Duration]\n┌─────────────────────┐\n│ ▼ 1 month           │\n└─────────────────────┘\n  - 1 month\n  - 3 months\n  - 6 months\n  - 1 year\n  - Custom...\n```\n\n## Technical Considerations\n- **Database changes**: None\n- **API endpoints**: None (client-side calculation)\n- **Dependencies**: None\n\n## Alternatives Considered\n- Calendar widget with quick presets\n- Natural language input (\"1 month from today\")\n\n## Priority Justification\nImproves UX for common workflow, reduces user friction when granting consents.",
    "labels": ["enhancement", "consent", "ux", "medium"],
    "assignees": []
  },
  "security_vulnerability": {
    "title": "Security: CSRF vulnerability in consent revocation endpoint",
    "body": "⚠️ **SECURITY ISSUE - Handle with care**\n\n## Vulnerability Type\nCross-Site Request Forgery (CSRF)\n\n## Severity Assessment\n- **Severity**: High\n- **CVSS Score**: 7.1 (High)\n- **Attack Complexity**: Low\n- **Privileges Required**: None (user must be authenticated)\n\n## Affected Component\nConsent Management API - `/api/consent/[id]` DELETE endpoint\n\n## Vulnerability Description\nThe consent revocation endpoint does not validate CSRF tokens, allowing attackers to trick authenticated users into revoking consents via malicious websites.\n\n## Attack Scenario\n1. Victim is authenticated to LucidData\n2. Victim visits attacker's website\n3. Attacker's site sends DELETE request to `/api/consent/{id}`\n4. Consent is revoked without user's knowledge\n\n## Proof of Concept\n**Steps to reproduce**:\n1. Log in to LucidData\n2. Visit malicious page with hidden form:\n   ```html\n   <form id=\"csrf\" action=\"http://localhost:3000/api/consent/123\" method=\"POST\">\n     <input type=\"hidden\" name=\"_method\" value=\"DELETE\">\n   </form>\n   <script>document.getElementById('csrf').submit();</script>\n   ```\n3. Consent #123 is revoked\n\n**Note**: Actual exploit details withheld for responsible disclosure\n\n## Impact Analysis\n- **Confidentiality**: Low (no data exposed)\n- **Integrity**: High (unauthorized state change)\n- **Availability**: Low\n- **Data at risk**: Consent records (could be maliciously revoked)\n\n## Affected Versions\n- **Introduced in**: v1.0.0\n- **Fixed in**: TBD\n\n## Recommended Fix\n1. Implement CSRF token validation using Next.js CSRF protection\n2. Add SameSite=Strict cookie attribute\n3. Validate Origin/Referer headers\n4. Require re-authentication for sensitive actions\n\n## Mitigation (Temporary)\n- Monitor audit logs for unexpected consent revocations\n- Alert users when consents are revoked\n\n## Disclosure Timeline\n- Discovery date: 2026-01-13\n- Vendor notification: 2026-01-13 (this issue)\n- Public disclosure: Coordinate with maintainers (after patch)\n\n⚠️ **DO NOT publicly disclose until patch is released**",
    "labels": ["security", "high", "consent"],
    "assignees": []
  },
  "test_failure_playwright": {
    "title": "Test: E2E vault CRUD test failing on Firefox",
    "body": "## Test Information\n- **File**: `__tests__/e2e/vault/crud.spec.ts`\n- **Test name**: \"should create, edit, and delete vault entry\"\n- **Framework**: Playwright\n- **Test type**: E2E\n\n## Failure Output\n```\nError: expect(received).toBeVisible()\n\nExpected element to be visible, but it was not found\n  at __tests__/e2e/vault/crud.spec.ts:45:60\n\nScreenshot: test-results/vault-crud-firefox/test-failed-1.png\n```\n\n## Expected Result\nAfter creating a vault entry, it should appear in the list and be visible in Firefox\n\n## Actual Result\nEntry is not visible in Firefox (works in Chromium and WebKit)\n\n## Reproducibility\n- [ ] Fails consistently\n- [x] Fails intermittently (timing issue)\n- [ ] Fails only in CI/CD\n- [ ] Fails only locally\n\n## Recent Changes\n- PR #42: Optimized vault list rendering with React.memo\n- Commit abc1234: Updated Playwright to 1.57.0\n\n## Investigation Notes\n- Screenshot shows empty vault list\n- Firefox console shows no errors\n- Suspecting race condition with React Query cache invalidation\n\n## Suggested Fix\nAdd explicit `waitFor` before assertion:\n```typescript\nawait waitFor(() => {\n  expect(page.locator(`text=${entryLabel}`)).toBeVisible();\n});\n```",
    "labels": ["testing", "vault", "high"],
    "assignees": []
  },
  "documentation_update": {
    "title": "Docs: Add Prisma migration troubleshooting guide",
    "body": "## Documentation Type\nSetup Guide / Troubleshooting\n\n## Current State\nREADME.md has basic Prisma setup instructions but lacks troubleshooting for common migration errors\n\n## Proposed Changes\nAdd section \"Troubleshooting Prisma Migrations\" covering:\n- Failed migration due to data conflicts\n- Lock timeout errors\n- Migration drift detection\n- Resetting database safely\n- Running migrations in production\n\n## Affected Files\n- `README.md` (add troubleshooting section)\n- `docs/DATABASE.md` (new file with detailed Prisma guide)\n\n## Audience\nDevelopers setting up local environment or deploying to production\n\n## Priority\nMedium - Would help onboarding new contributors\n\n## Example Content\n```markdown\n### Troubleshooting Prisma Migrations\n\n#### Migration failed: Foreign key constraint\n1. Check existing data conflicts\n2. Create data migration before schema migration\n3. Use `prisma migrate resolve --rolled-back`\n\n#### Database lock timeout\n1. Ensure no other connections to database\n2. Stop dev server before migrating\n3. Increase timeout: `migrate --schema-timeout=30s`\n```",
    "labels": ["documentation", "database", "medium"],
    "assignees": []
  }
}
